version: 0.2

phases:
  build:
    commands:
      - apt-get update
      - apt-get -y install libx11-dev libxext-dev libxrender-dev libxtst-dev libxt-dev
      - hg clone http://hg.openjdk.java.net/jdk9/jdk9
      - cd ./jdk9
      - chmod +x ./get_source.sh
      - sh ./get_source.sh
      - chmod +x ./configure
      - sh ./configure --disable-warnings-as-errors --with-debug-level=slowdebug --with-native-debug-symbols=internal
      - make images
      - cd ./build/linux-86_x64-normal-server-release/images/jdk
      - ls
      - echo $JAVA_HOME
      - ls | sed "s:^:`pwd`/: "
      - java -version
      - chmod +x ./gradlew
      - ./gradlew assembleDebug
artifacts:
  files:
     - './android/app/build/outputs/**/*.apk'
  discard-paths: yes
